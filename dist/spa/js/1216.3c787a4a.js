"use strict";(globalThis["webpackChunkdoctolib"]=globalThis["webpackChunkdoctolib"]||[]).push([[1216],{31216:(e,a,r)=>{r.r(a),r.d(a,{default:()=>T});var s=r(59835);const o={class:"row q-col-gutter-md"},t={class:"col-12"},l=(0,s._)("h6",{class:"q-mt-none q-mb-sm"},"User Details",-1),d={class:"q-col-gutter-md"},n={class:"col-12"},u={class:"col-12"},i={class:"col-12"},m={class:"flex justify-end q-pt-md"},p=(0,s.Uk)("Update"),c={class:"col-12"},g=(0,s._)("h6",{class:"q-mt-none q-mb-sm"},"Change Password",-1),h={class:"q-col-gutter-md"},w={class:"col-12"},_={class:"col-12"},f={class:"col-12"},U={class:"flex justify-end q-pt-md"},b=(0,s.Uk)("Change Password");function S(e,a,r,S,V,v){const y=(0,s.up)("q-input"),q=(0,s.up)("UploaderFile"),W=(0,s.up)("q-field"),P=(0,s.up)("q-btn"),C=(0,s.up)("q-card-section"),Z=(0,s.up)("q-card"),$=(0,s.up)("q-form"),E=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(E,{class:"container"},{default:(0,s.w5)((()=>[(0,s._)("div",o,[(0,s.Wm)($,{class:"col-12",onSubmit:S.onSubmit},{default:(0,s.w5)((()=>[(0,s._)("div",t,[(0,s.Wm)(Z,{flat:"",bordered:""},{default:(0,s.w5)((()=>[(0,s.Wm)(C,null,{default:(0,s.w5)((()=>[l,(0,s._)("div",d,[(0,s._)("div",n,[(0,s.Wm)(y,{dense:"",outlined:"",label:"Name",modelValue:S.authUserStore.authUser.name,"onUpdate:modelValue":a[0]||(a[0]=e=>S.authUserStore.authUser.name=e)},null,8,["modelValue"])]),(0,s._)("div",u,[(0,s.Wm)(y,{dense:"",outlined:"",label:"Username",modelValue:S.authUserStore.authUser.username,"onUpdate:modelValue":a[1]||(a[1]=e=>S.authUserStore.authUser.username=e)},null,8,["modelValue"])]),(0,s._)("div",i,[(0,s.Wm)(W,null,{default:(0,s.w5)((()=>[(0,s.Wm)(q,{label:"Upload Signature",modelValue:S.authUserStore.authUser.signature_picture,"onUpdate:modelValue":a[2]||(a[2]=e=>S.authUserStore.authUser.signature_picture=e),acceptFileType:".jpg, image/*"},null,8,["modelValue"])])),_:1})])]),(0,s._)("div",m,[(0,s.Wm)(P,{type:"primary",color:"primary"},{default:(0,s.w5)((()=>[p])),_:1})])])),_:1})])),_:1})])])),_:1},8,["onSubmit"]),(0,s.Wm)($,{class:"col-12",onSubmit:S.onSubmitPass},{default:(0,s.w5)((()=>[(0,s._)("div",c,[(0,s.Wm)(Z,{flat:"",bordered:""},{default:(0,s.w5)((()=>[(0,s.Wm)(C,null,{default:(0,s.w5)((()=>[g,(0,s._)("div",h,[(0,s._)("div",w,[(0,s.Wm)(y,{type:"password",dense:"",outlined:"",label:"Old Password",modelValue:S.authUserStore.credential.old_password,"onUpdate:modelValue":a[3]||(a[3]=e=>S.authUserStore.credential.old_password=e),"error-message":e.$getValidationErrors("old_password"),error:e.$hasValidationErrors("old_password")},null,8,["modelValue","error-message","error"])]),(0,s._)("div",_,[(0,s.Wm)(y,{type:"password",dense:"",outlined:"",label:"New Password",modelValue:S.authUserStore.credential.password,"onUpdate:modelValue":a[4]||(a[4]=e=>S.authUserStore.credential.password=e),"error-message":e.$getValidationErrors("password"),error:e.$hasValidationErrors("password")},null,8,["modelValue","error-message","error"])]),(0,s._)("div",f,[(0,s.Wm)(y,{type:"password",dense:"",outlined:"",label:"Confirm Password",modelValue:S.authUserStore.credential.confirm_password,"onUpdate:modelValue":a[5]||(a[5]=e=>S.authUserStore.credential.confirm_password=e),"error-message":e.$getValidationErrors("confirm_password"),error:e.$hasValidationErrors("confirm_password")},null,8,["modelValue","error-message","error"])])]),(0,s._)("div",U,[(0,s.Wm)(P,{type:"submit",loading:e.passChangeLoader,color:"primary"},{default:(0,s.w5)((()=>[b])),_:1},8,["loading"])])])),_:1})])),_:1})])])),_:1},8,["onSubmit"])])])),_:1})}var V=r(60499),v=r(19082),y=r(61276),q=r(33701),W=r(94432);const P={component:{},setup(){const e=(0,v.t)(),a=(0,y.J)(),r=(0,q.L)(),{setDigitalSignature:o}=r,t=(0,W.Z)(),{uploadItem:l}=t,d=(0,s.FN)(),n=d.appContext.config.globalProperties.$Qnotify,u=d.appContext.config.globalProperties.$setValidationErrors,i=d.appContext.config.globalProperties.$clearValidationErrors,m=(0,V.iH)(!1),p=a=>{let r=new FormData;return r.append("attachment_type","image"),r.append("file",a[0]),new Promise((a=>{l(r).then((r=>{e.setSignature({id:r.data.media_id}),a({url:null})})).finally((()=>{}))}))},c=()=>{e.updateProfile().then((e=>{n({message:e.data.message,type:"positive"})})).catch((e=>{let a="";a=e.response.data.message?e.response.data.message:e.response.data.error,n({message:a,type:"negative"})}))},g=()=>{m.value=!0,e.updatePassword().then((e=>{m.value=!1,i(),n({message:e.data.message,type:"positive"})})).catch((e=>{m.value=!1;let a="";a=e.response.data.message?e.response.data.message:e.response.data.error;let r={};e.response.data.errors&&(r=e.response.data.errors),u(r),n({message:a,type:"negative"})}))};return{authUserStore:e,companyStore:a,userStore:r,setDigitalSign:p,onSubmit:c,onSubmitPass:g}}};var C=r(11639),Z=r(69885),$=r(8326),E=r(44458),Q=r(63190),k=r(66611),F=r(18149),x=r(68879),j=r(69984),D=r.n(j);const N=(0,C.Z)(P,[["render",S]]),T=N;D()(P,"components",{QPage:Z.Z,QForm:$.Z,QCard:E.Z,QCardSection:Q.Z,QInput:k.Z,QField:F.Z,QBtn:x.Z})}}]);