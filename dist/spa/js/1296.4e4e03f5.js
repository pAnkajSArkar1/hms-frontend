"use strict";(globalThis["webpackChunkdoctolib"]=globalThis["webpackChunkdoctolib"]||[]).push([[1296],{11296:(a,e,l)=>{l.r(e),l.d(e,{default:()=>I});var t=l(59835);const o={class:"q-pa-md"};function s(a,e,l,s,d,i){const n=(0,t.up)("ICMenu"),u=(0,t.up)("checkDashboard"),r=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(r,null,{default:(0,t.w5)((()=>[(0,t.Wm)(n),(0,t._)("div",o,[(0,t.Wm)(u)])])),_:1})}var d=l(86970);const i={class:"row q-col-gutter-md"},n={class:"col-12 col-md-2 col-lg-2"},u=(0,t.Uk)(" Count of Checklists "),r=(0,t.Uk)("10"),c={class:"col-12 col-md-10 col-lg-10"},m={class:"col-12 col-md-4 col-lg-4"},h={class:"col-12 col-md-8 col-lg-8"},p=(0,t._)("template",null,null,-1),w=(0,t.Uk)(" Email Report "),C=["onClick"],b=(0,t.Uk)(" Download ");function f(a,e,l,o,s,f){const k=(0,t.up)("q-card-section"),_=(0,t.up)("q-card"),D=(0,t.up)("BarChart"),q=(0,t.up)("PieChart"),g=(0,t.up)("q-tooltip"),E=(0,t.up)("q-btn"),W=(0,t.up)("QDataTable"),v=(0,t.up)("create-dashboard"),S=(0,t.up)("q-dialog"),F=(0,t.up)("EmailReport"),R=(0,t.up)("edit-dashboard");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",i,[(0,t._)("div",n,[(0,t.Wm)(_,null,{default:(0,t.w5)((()=>[(0,t.Wm)(k,{class:"text-weight-bold q-pb-none"},{default:(0,t.w5)((()=>[u])),_:1}),(0,t.Wm)(k,{class:"text-weight-bold"},{default:(0,t.w5)((()=>[r])),_:1})])),_:1})]),(0,t._)("div",c,[(0,t.Wm)(_,null,{default:(0,t.w5)((()=>[(0,t.Wm)(k,null,{default:(0,t.w5)((()=>[(0,t.Wm)(D,{class:"checklist-barchart",chartData:o.chartData,chatTitle:"Equipment/Assets"},null,8,["chartData"])])),_:1})])),_:1})]),(0,t._)("div",m,[(0,t.Wm)(_,null,{default:(0,t.w5)((()=>[(0,t.Wm)(k,null,{default:(0,t.w5)((()=>[(0,t.Wm)(q,{class:"checklist-piechart",chartData:o.chartData,chatTitle:"Equipment"},null,8,["chartData"])])),_:1})])),_:1})]),(0,t._)("div",h,[(0,t.Wm)(W,{aditionalActions:!0,useStore:o.useStore,title:"All Checklists"},{aditionalActions:(0,t.w5)((a=>[(0,t.Wm)(E,{flat:"",round:"",dense:"",color:"secondary",icon:"email",class:"q-ml-sm",onClick:e=>o.onClickEmail(a.row)},{default:(0,t.w5)((()=>[(0,t.Wm)(g,null,{default:(0,t.w5)((()=>[w])),_:1})])),_:2},1032,["onClick"]),(0,t._)("span",{onClick:e=>o.onTableRowClick(a.row)},null,8,C),(0,t.Wm)(E,{flat:"",round:"",dense:"",color:"secondary",icon:"file_download",class:"q-ml-sm",onClick:e=>o.onClickDownload(a.row)},{default:(0,t.w5)((()=>[(0,t.Wm)(g,null,{default:(0,t.w5)((()=>[b])),_:1})])),_:2},1032,["onClick"])])),default:(0,t.w5)((()=>[p])),_:1},8,["useStore"])])]),(0,t.Wm)(S,{modelValue:o.showCreateDashboard,"onUpdate:modelValue":e[0]||(e[0]=a=>o.showCreateDashboard=a)},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{class:"",style:{width:"600px"}},{default:(0,t.w5)((()=>[(0,t._)("div",{class:(0,d.C_)((a.$q.platform.is.desktop,""))},[(0,t.Wm)(v,{useStore:o.useStore,modal:!0},null,8,["useStore"])],2)])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(S,{modelValue:o.showEmailDialog,"onUpdate:modelValue":e[1]||(e[1]=a=>o.showEmailDialog=a)},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{class:"",style:{width:"600px"}},{default:(0,t.w5)((()=>[(0,t._)("div",{class:(0,d.C_)((a.$q.platform.is.desktop,""))},[(0,t.Wm)(F,{useStore:o.useStore,modal:!0},null,8,["useStore"])],2)])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(S,{modelValue:o.showEditDashboard,"onUpdate:modelValue":e[2]||(e[2]=a=>o.showEditDashboard=a)},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{class:"",style:{width:"600px"}},{default:(0,t.w5)((()=>[(0,t._)("div",{class:(0,d.C_)((a.$q.platform.is.desktop,""))},[(0,t.Wm)(R,{useStore:o.useStore,modal:!0},null,8,["useStore"])],2)])),_:1})])),_:1},8,["modelValue"])],64)}l(69665);var k=l(60499),_=l(40038);const D=(0,t.RC)((()=>Promise.all([l.e(4736),l.e(6869)]).then(l.bind(l,56869)))),q=(0,t.RC)((()=>Promise.all([l.e(4736),l.e(4386)]).then(l.bind(l,54386)))),g=(0,t.RC)((()=>Promise.all([l.e(3064),l.e(2400)]).then(l.bind(l,72400)))),E={name:"InspectionDashboard",components:{CreateDashboard:D,EditDashboard:q,EmailReport:g},setup(){const a=(0,_.L)(),e=(0,t.Fl)((()=>a.showCreateDashboard)),l=(0,t.Fl)((()=>a.showEditDashboard)),o=(0,t.Fl)((()=>a.showEmailDialog)),{generateReportDownloadURL:s}=a,d=(0,k.iH)(""),i=a=>{router.push({name:props.viewRoute,params:{id:a.id}})},n=a=>{s({id:a.id}).then((a=>{window.open(a.tempUrl)}))},u=e=>{a.emailReport.id=e.id,a.dialogs.emailReport=!0},r=(0,k.qj)({labels:["Fire Equipment","Safety Equipment","Health Equipment"],datasets:[{data:[],backgroundColor:["#F70606","#F4F706","#2ADF06"],hoverOffset:4}]}),c=e=>{a.getItem(e.id).then((a=>{d.value=a.data,r.datasets[0].data=[],r.datasets[0].data.push(a.data.risk_rating),r.datasets[0].data.push(a.data.frequency),r.datasets[0].data.push(a.data.severity),r.datasets[0].data.push(a.data.likelyhood)}))};return{useStore:a,showCreateDashboard:e,showEditDashboard:l,onClickDownload:n,showEmailDialog:o,onClickEmail:u,onClickView:i,onTableRowClick:c,checklistDetails:d,chartData:{labels:["Fire Equipment","Safety Equipment","Health Equipment"],datasets:[{data:[11,16,7],labels:["Fire Equipment","Safety Equipment","Health Equipment"],backgroundColor:["#F70606","#F4F706","#2ADF06"]}]}}}};var W=l(11639),v=l(44458),S=l(63190),F=l(68879),R=l(46858),y=l(32074),V=l(69984),U=l.n(V);const T=(0,W.Z)(E,[["render",f]]),Z=T;U()(E,"components",{QCard:v.Z,QCardSection:S.Z,QBtn:F.Z,QTooltip:R.Z,QDialog:y.Z});const Q=(0,t.RC)((()=>l.e(4397).then(l.bind(l,84397)))),A={components:{checkDashboard:Z,ICMenu:Q},setup(){return{ICMenu:Q}}};var x=l(69885);const H=(0,W.Z)(A,[["render",s]]),I=H;U()(A,"components",{QPage:x.Z})}}]);