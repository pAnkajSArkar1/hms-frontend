"use strict";(globalThis["webpackChunkdoctolib"]=globalThis["webpackChunkdoctolib"]||[]).push([[2400],{72400:(e,a,o)=>{o.r(a),o.d(a,{default:()=>E});var l=o(59835),r=o(61957);const t=(0,l._)("div",{class:"text-subtitle1 text-bold q-py-none text-white"}," Email Report ",-1),s=(0,l.Uk)(" Close "),i={class:"row q-col-gutter-md q-pb-md"},n={class:"col-12"},u={class:"col-12"},m={class:"col-12"},d={class:"col-12"};function p(e,a,o,p,c,g){const b=(0,l.up)("q-space"),f=(0,l.up)("q-tooltip"),v=(0,l.up)("q-btn"),V=(0,l.up)("q-card-section"),_=(0,l.up)("q-input"),q=(0,l.up)("QSearch"),w=(0,l.up)("q-separator"),R=(0,l.up)("q-spinner-facebook"),S=(0,l.up)("q-card-actions"),y=(0,l.up)("q-card"),W=(0,l.up)("q-form");return(0,l.wg)(),(0,l.j4)(W,{ref:"createForm",onSubmit:(0,r.iM)(p.submitForm,["prevent"])},{default:(0,l.w5)((()=>[(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l.Wm)(V,{class:"row items-center q-py-sm bg-primary"},{default:(0,l.w5)((()=>[t,(0,l.Wm)(b),(0,l.Wm)(v,{color:"white",icon:"close",flat:"",round:"",dense:"",onClick:a[0]||(a[0]=e=>p.dialogs.emailReport=!1)},{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[s])),_:1})])),_:1})])),_:1}),(0,l.Wm)(V,{class:"q-pb-none"},{default:(0,l.w5)((()=>[(0,l._)("div",i,[(0,l._)("div",n,[(0,l.Wm)(_,{dense:"",outlined:"",label:"Subject",modelValue:p.emailReport.subject,"onUpdate:modelValue":a[1]||(a[1]=e=>p.emailReport.subject=e),autogrow:""},null,8,["modelValue"])]),(0,l._)("div",u,[(0,l.Wm)(q,{label:"Select User",useStore:p.userStore,modelValue:p.emailReport.user_id,"onUpdate:modelValue":a[2]||(a[2]=e=>p.emailReport.user_id=e),optionValue:"id",optionLabel:"name","error-message":e.$getValidationErrors("user_id"),error:e.$hasValidationErrors("user_id")},null,8,["useStore","modelValue","error-message","error"])]),(0,l._)("div",m,[(0,l.Wm)(_,{dense:"",outlined:"",label:"Email",type:"email",modelValue:p.emailReport.email,"onUpdate:modelValue":a[3]||(a[3]=e=>p.emailReport.email=e),autogrow:"","error-message":e.$getValidationErrors("email"),error:e.$hasValidationErrors("email")},null,8,["modelValue","error-message","error"])]),(0,l._)("div",d,[(0,l.Wm)(_,{dense:"",outlined:"",label:"Message",modelValue:p.emailReport.message,"onUpdate:modelValue":a[4]||(a[4]=e=>p.emailReport.message=e),type:"textarea"},null,8,["modelValue"])])])])),_:1}),(0,l.Wm)(w),(0,l.Wm)(S,{class:"justify-end q-py-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{icon:"email",label:"Email Report",type:"submit",color:"primary",unelevated:"",loading:p.submitting,dense:""},{loading:(0,l.w5)((()=>[(0,l.Wm)(R)])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1},8,["onSubmit"])}var c=o(60499),g=o(3746),b=o(33701);const f={name:"emailReportPage",props:{useStore:null},setup(e){const a=(0,l.FN)(),o=a.appContext.config.globalProperties.$Qnotify,r=a.appContext.config.globalProperties.$setValidationErrors,t=a.appContext.config.globalProperties.$clearValidationErrors,{useStore:s}=(0,c.qj)(e),{emailReport:i,dialogs:n}=(0,g.Jk)(s),{emailReportToUser:u}=s,m=(0,c.iH)(!1),d=(0,b.L)();(0,l.bv)((()=>{t()}));const p=()=>{if(null===i.value.user_id&&""===i.value.email)return o({message:"Please select user or enter email",type:"negative"}),!1;m.value=!0,u().then((e=>{t(),o({message:e.data.message,type:"positive"})})).catch((e=>{let a="";a=e.response.data.message?e.response.data.message:e.response.data.error;let l={};e.response.data.errors&&(l=e.response.data.errors),r(l),o({message:a,type:"negative"})})).finally((()=>{m.value=!1}))};return{emailReport:i,dialogs:n,submitForm:p,submitting:m,userStore:d}}};var v=o(11639),V=o(8326),_=o(44458),q=o(63190),w=o(90136),R=o(68879),S=o(46858),y=o(66611),W=o(50926),h=o(11821),Q=o(27234),Z=o(69984),C=o.n(Z);const k=(0,v.Z)(f,[["render",p]]),E=k;C()(f,"components",{QForm:V.Z,QCard:_.Z,QCardSection:q.Z,QSpace:w.Z,QBtn:R.Z,QTooltip:S.Z,QInput:y.Z,QSeparator:W.Z,QCardActions:h.Z,QSpinnerFacebook:Q.Z})}}]);