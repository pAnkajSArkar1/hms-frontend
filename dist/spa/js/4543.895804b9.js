"use strict";(globalThis["webpackChunkdoctolib"]=globalThis["webpackChunkdoctolib"]||[]).push([[4543],{84543:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Re});var n={};a.r(n),a.d(n,{showCreateDashboard:()=>P,showEditDashboard:()=>V});var o={};a.r(o),a.d(o,{createItem:()=>U,deleteItem:()=>R,editItem:()=>Q,getItems:()=>x});var r={};a.r(r),a.d(r,{showCreateIncidentReport:()=>L,showEditIncidentReport:()=>O});var s={};a.r(s),a.d(s,{createItem:()=>te,deleteItem:()=>ne,editItem:()=>ae,getItems:()=>ee});var i={};a.r(i),a.d(i,{showCreateIncident:()=>he,showEditIncident:()=>fe});var l={};a.r(l),a.d(l,{createItem:()=>Ie,deleteItem:()=>De,editItem:()=>be,getItems:()=>ge});var d=a(59835);const c={class:"container q-pb-none"},m=(0,d._)("h1",{class:"text-weight-bold q-mt-none"}," INCIDENT MANAGEMENT - SAFETTRANS ",-1),u={class:"q-gutter-y-sm q-pt-none"};function p(e,t,a,n,o,r){const s=(0,d.up)("q-tab"),i=(0,d.up)("q-tabs"),l=(0,d.up)("incidentDashboard"),p=(0,d.up)("q-tab-panel"),h=(0,d.up)("incidentReport"),f=(0,d.up)("branches"),w=(0,d.up)("incidents"),g=(0,d.up)("q-tab-panels"),I=(0,d.up)("q-page");return(0,d.wg)(),(0,d.j4)(I,null,{default:(0,d.w5)((()=>[(0,d._)("div",c,[m,(0,d.Wm)(i,{modelValue:n.tab,"onUpdate:modelValue":t[0]||(t[0]=e=>n.tab=e),align:"justify","narrow-indicator":"","active-color":"primary"},{default:(0,d.w5)((()=>[(0,d.Wm)(s,{name:"DashBoard",label:"Dashboard"}),(0,d.Wm)(s,{name:"incidentsreport",label:"Incident Report"}),(0,d.Wm)(s,{name:"branches",label:"Branches"}),(0,d.Wm)(s,{name:"incidents",label:"Incidents"})])),_:1},8,["modelValue"])]),(0,d._)("div",u,[(0,d.Wm)(g,{modelValue:n.tab,"onUpdate:modelValue":t[1]||(t[1]=e=>n.tab=e),animated:"","transition-prev":"scale","transition-next":"scale"},{default:(0,d.w5)((()=>[(0,d.Wm)(p,{name:"DashBoard"},{default:(0,d.w5)((()=>[(0,d.Wm)(l)])),_:1}),(0,d.Wm)(p,{name:"incidentsreport"},{default:(0,d.w5)((()=>[(0,d.Wm)(h)])),_:1}),(0,d.Wm)(p,{name:"branches"},{default:(0,d.w5)((()=>[(0,d.Wm)(f)])),_:1}),(0,d.Wm)(p,{name:"incidents"},{default:(0,d.w5)((()=>[(0,d.Wm)(w)])),_:1})])),_:1},8,["modelValue"])])])),_:1})}var h=a(60499);const f=(0,d._)("h1",{class:""},"Dashboard",-1),w={class:"row flex justify-center q-col-gutter-md"},g={class:"col-12 col-md-4 col-lg-4"},I={class:"row items-center justify-end"},b={class:"col-12 col-md-4 col-lg-4"},D={class:"row items-center justify-end"},_={class:"col-12 col-md-4 col-lg-4"},v=(0,d.Uk)(" Submit "),W={class:"col-12 q-mt-md"};function C(e,t,a,n,o,r){const s=(0,d.up)("q-btn"),i=(0,d.up)("q-date"),l=(0,d.up)("q-popup-proxy"),c=(0,d.up)("q-icon"),m=(0,d.up)("q-input"),u=(0,d.up)("QDataTable"),p=(0,d.Q2)("close-popup");return(0,d.wg)(),(0,d.iD)(d.HY,null,[f,(0,d._)("div",w,[(0,d._)("div",g,[(0,d.Wm)(m,{outlined:"",dense:"",readonly:"",label:"Incidents From",modelValue:n.reportfrom,"onUpdate:modelValue":t[1]||(t[1]=e=>n.reportfrom=e),mask:"date",rules:[e=>e&&e.length||"Please enter reportfrom"],"error-message":e.$getValidationErrors("reportfrom"),error:e.$hasValidationErrors("reportfrom")},{append:(0,d.w5)((()=>[(0,d.Wm)(c,{name:"event",class:"cursor-pointer"},{default:(0,d.w5)((()=>[(0,d.Wm)(l,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,d.w5)((()=>[(0,d.Wm)(i,{modelValue:n.reportfrom,"onUpdate:modelValue":t[0]||(t[0]=e=>n.reportfrom=e)},{default:(0,d.w5)((()=>[(0,d._)("div",I,[(0,d.wy)((0,d.Wm)(s,{label:"Close",color:"primary",flat:""},null,512),[[p]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue","rules","error-message","error"])]),(0,d._)("div",b,[(0,d.Wm)(m,{outlined:"",dense:"",readonly:"",label:"Incidents To",modelValue:n.reportto,"onUpdate:modelValue":t[3]||(t[3]=e=>n.reportto=e),mask:"date",rules:[e=>e&&e.length||"Please enter reportto"],"error-message":e.$getValidationErrors("reportto"),error:e.$hasValidationErrors("reportto")},{append:(0,d.w5)((()=>[(0,d.Wm)(c,{name:"event",class:"cursor-pointer"},{default:(0,d.w5)((()=>[(0,d.Wm)(l,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,d.w5)((()=>[(0,d.Wm)(i,{modelValue:n.reportto,"onUpdate:modelValue":t[2]||(t[2]=e=>n.reportto=e)},{default:(0,d.w5)((()=>[(0,d._)("div",D,[(0,d.wy)((0,d.Wm)(s,{label:"Close",color:"primary",flat:""},null,512),[[p]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue","rules","error-message","error"])]),(0,d._)("div",_,[(0,d.Wm)(s,{color:"primary"},{default:(0,d.w5)((()=>[v])),_:1})]),(0,d._)("div",W,[(0,d.Wm)(u,{canAdd:!1,useStore:n.useStore,title:"All Incidents"},null,8,["useStore"])])])],64)}var q=a(3746);function y(){return{columns:[{name:"branchname",align:"left",label:"Branch Name",field:"branchname",sortable:!0}],filter:{search:""},items:(0,h.qj)([]),item:(0,h.qj)({}),formData:(0,h.qj)({branchname:"",reportfrom:"",reportto:""}),dialogs:(0,h.qj)({createItem:!1,editItem:!1}),lastUpdated:""}}function P(e){return e.dialogs.createItem}function V(e){return e.dialogs.editItem}var S=a(91569);const E="activity";function x(e){if(console.log("getItems",!0),1==e.pagination.descending)var t="DESC";else t="ASC";var a={sort:e.pagination.sortBy,direction:t,page:e.pagination.page,rowsPerPage:e.pagination.rowsPerPage,search:e.search?e.search:this.filter.search};return new Promise(((e,t)=>{S.axios.get(E,{params:a}).then((t=>{e(t)})).catch((e=>{t(e)}))}))}function U(){return new Promise(((e,t)=>{S.axios.post(E,this.formData).then((t=>{this.lastUpdated=new Date,this.dialogs.createItem=!1,e(t)})).catch((e=>{t(e)}))}))}function Q(){return new Promise(((e,t)=>{S.axios.put(E+"/"+this.formData.id,this.formData).then((t=>{this.lastUpdated=new Date,this.dialogs.editItem=!1,e(t)})).catch((e=>{t(e)}))}))}function R(e){return new Promise(((t,a)=>{S.axios["delete"](E+"/"+e.id).then((e=>{this.lastUpdated=new Date,t(e)})).catch((e=>{a(e)}))}))}const j=(0,q.Q_)("Dashboard",{state:y,getters:{...n},actions:{...o}}),Z={name:"InspectionDashboard",components:{},setup(){const e=j();return{useStore:e,reportfrom:(0,h.iH)({from:null,to:null}),reportto:(0,h.iH)("")}}};var T=a(11639),k=a(66611),A=a(22857),B=a(52765),N=a(14351),$=a(68879),F=a(62146),H=a(69984),M=a.n(H);const Y=(0,T.Z)(Z,[["render",C]]),G=Y;M()(Z,"components",{QInput:k.Z,QIcon:A.Z,QPopupProxy:B.Z,QDate:N.Z,QBtn:$.Z}),M()(Z,"directives",{ClosePopup:F.Z});var z=a(86970);function J(e,t,a,n,o,r){const s=(0,d.up)("QDataTable"),i=(0,d.up)("create-incidentreport"),l=(0,d.up)("q-card"),c=(0,d.up)("q-dialog"),m=(0,d.up)("edit-incidentreport");return(0,d.wg)(),(0,d.iD)(d.HY,null,[(0,d.Wm)(s,{setCreateModal:!1,useStore:n.useStore,title:"Incident Report"},null,8,["useStore"]),(0,d.Wm)(c,{modelValue:n.showCreateIncidentReport,"onUpdate:modelValue":t[0]||(t[0]=e=>n.showCreateIncidentReport=e)},{default:(0,d.w5)((()=>[(0,d.Wm)(l,{class:"",style:{"max-width":"1000px"}},{default:(0,d.w5)((()=>[(0,d._)("div",{class:(0,z.C_)((e.$q.platform.is.desktop,""))},[(0,d.Wm)(i,{useStore:n.useStore,modal:!0},null,8,["useStore"])],2)])),_:1})])),_:1},8,["modelValue"]),(0,d.Wm)(c,{modelValue:n.showEditIncidentReport,"onUpdate:modelValue":t[1]||(t[1]=e=>n.showEditIncidentReport=e)},{default:(0,d.w5)((()=>[(0,d.Wm)(l,{class:"",style:{"max-width":"1000px"}},{default:(0,d.w5)((()=>[(0,d._)("div",{class:(0,z.C_)((e.$q.platform.is.desktop,""))},[(0,d.Wm)(m,{useStore:n.useStore,modal:!0},null,8,["useStore"])],2)])),_:1})])),_:1},8,["modelValue"])],64)}function K(){return{columns:[{name:"date",align:"left",label:"Date",field:"date",sortable:!0},{name:"incidentnumber",align:"left",label:"IncidentNumber",field:"incidentnumber",sortable:!0},{name:"businessname",align:"left",label:"BusinessName",field:"businessname",sortable:!0},{name:"incidenttype",align:"left",label:"IncidentType",field:"incidenttype",sortable:!0}],filter:{search:""},items:(0,h.qj)([]),item:(0,h.qj)({}),formData:(0,h.qj)({date:"",incidentnumber:"",businessname:"",incidenttype:"",branch:"",address:"",personname:"",desig:"",contactnumber:"",email:"",placeofincident:"",dateofincident:"",timeofincident:"",numofemp:"",nameofemp:"",dept:"",manager:"",causeofinjury:"",natureofinjury:"",rootcause:"",dayslostfrom:"",dayslostto:"",dayslost:""}),dialogs:(0,h.qj)({createItem:!1,editItem:!1}),lastUpdated:""}}function L(e){return e.dialogs.createItem}function O(e){return e.dialogs.editItem}const X="activity";function ee(e){if(console.log("getItems",!0),1==e.pagination.descending)var t="DESC";else t="ASC";var a={sort:e.pagination.sortBy,direction:t,page:e.pagination.page,rowsPerPage:e.pagination.rowsPerPage,search:e.search?e.search:this.filter.search};return new Promise(((e,t)=>{S.axios.get(X,{params:a}).then((t=>{e(t)})).catch((e=>{t(e)}))}))}function te(){return new Promise(((e,t)=>{S.axios.post(X,this.formData).then((t=>{this.lastUpdated=new Date,this.dialogs.createItem=!1,e(t)})).catch((e=>{t(e)}))}))}function ae(){return new Promise(((e,t)=>{S.axios.put(X+"/"+this.formData.id,this.formData).then((t=>{this.lastUpdated=new Date,this.dialogs.editItem=!1,e(t)})).catch((e=>{t(e)}))}))}function ne(e){return new Promise(((t,a)=>{S.axios["delete"](X+"/"+e.id).then((e=>{this.lastUpdated=new Date,t(e)})).catch((e=>{a(e)}))}))}const oe=(0,q.Q_)("incidentReport",{state:K,getters:{...r},actions:{...s}}),re=(0,d.RC)((()=>Promise.all([a.e(4736),a.e(1698)]).then(a.bind(a,41698)))),se=(0,d.RC)((()=>Promise.all([a.e(4736),a.e(3267)]).then(a.bind(a,13267)))),ie={name:"IncidentsReport",components:{CreateIncidentreport:re,EditIncidentreport:se},setup(){const e=oe(),t=(0,d.Fl)((()=>e.showCreateIncidentReport)),a=(0,d.Fl)((()=>e.showEditIncidentReport));return{useStore:e,showCreateIncidentReport:t,showEditIncidentReport:a}}};var le=a(32074),de=a(44458);const ce=(0,T.Z)(ie,[["render",J]]),me=ce;function ue(e,t,a,n,o,r){const s=(0,d.up)("QDataTable"),i=(0,d.up)("create-incident"),l=(0,d.up)("q-card"),c=(0,d.up)("q-dialog"),m=(0,d.up)("edit-incident");return(0,d.wg)(),(0,d.iD)(d.HY,null,[(0,d.Wm)(s,{setCreateModal:!1,useStore:n.useStore,title:"All Incidents"},null,8,["useStore"]),(0,d.Wm)(c,{modelValue:n.showCreateIncident,"onUpdate:modelValue":t[0]||(t[0]=e=>n.showCreateIncident=e)},{default:(0,d.w5)((()=>[(0,d.Wm)(l,{class:"",style:{width:"500px"}},{default:(0,d.w5)((()=>[(0,d._)("div",{class:(0,z.C_)((e.$q.platform.is.desktop,""))},[(0,d.Wm)(i,{useStore:n.useStore,modal:!0},null,8,["useStore"])],2)])),_:1})])),_:1},8,["modelValue"]),(0,d.Wm)(c,{modelValue:n.showEditIncident,"onUpdate:modelValue":t[1]||(t[1]=e=>n.showEditIncident=e)},{default:(0,d.w5)((()=>[(0,d.Wm)(l,{class:"",style:{width:"500px"}},{default:(0,d.w5)((()=>[(0,d._)("div",{class:(0,z.C_)((e.$q.platform.is.desktop,""))},[(0,d.Wm)(m,{useStore:n.useStore,modal:!0},null,8,["useStore"])],2)])),_:1})])),_:1},8,["modelValue"])],64)}function pe(){return{columns:[{name:"incidentname",align:"left",label:"Incident Name",field:"incidentname",sortable:!0}],filter:{search:""},items:(0,h.qj)([]),item:(0,h.qj)({}),formData:(0,h.qj)({incidentname:"",newincident:""}),dialogs:(0,h.qj)({createItem:!1,editItem:!1}),lastUpdated:""}}function he(e){return e.dialogs.createItem}function fe(e){return e.dialogs.editItem}M()(ie,"components",{QDialog:le.Z,QCard:de.Z});const we="activity";function ge(e){if(console.log("getItems",!0),1==e.pagination.descending)var t="DESC";else t="ASC";var a={sort:e.pagination.sortBy,direction:t,page:e.pagination.page,rowsPerPage:e.pagination.rowsPerPage,search:e.search?e.search:this.filter.search};return new Promise(((e,t)=>{S.axios.get(we,{params:a}).then((t=>{e(t)})).catch((e=>{t(e)}))}))}function Ie(){return new Promise(((e,t)=>{S.axios.post(we,this.formData).then((t=>{this.lastUpdated=new Date,this.dialogs.createItem=!1,e(t)})).catch((e=>{t(e)}))}))}function be(){return new Promise(((e,t)=>{S.axios.put(we+"/"+this.formData.id,this.formData).then((t=>{this.lastUpdated=new Date,this.dialogs.editItem=!1,e(t)})).catch((e=>{t(e)}))}))}function De(e){return new Promise(((t,a)=>{S.axios["delete"](we+"/"+e.id).then((e=>{this.lastUpdated=new Date,t(e)})).catch((e=>{a(e)}))}))}const _e=(0,q.Q_)("allincident",{state:pe,getters:{...i},actions:{...l}}),ve=(0,d.RC)((()=>a.e(1205).then(a.bind(a,71205)))),We=(0,d.RC)((()=>a.e(273).then(a.bind(a,30273)))),Ce={name:"AllIncident",components:{CreateIncident:ve,EditIncident:We},setup(){const e=_e(),t=(0,d.Fl)((()=>e.showCreateIncident)),a=(0,d.Fl)((()=>e.showEditIncident));return{useStore:e,showCreateIncident:t,showEditIncident:a}}},qe=(0,T.Z)(Ce,[["render",ue]]),ye=qe;M()(Ce,"components",{QDialog:le.Z,QCard:de.Z});const Pe={components:{incidentDashboard:G,incidentReport:me,incidents:ye},setup(){return{tab:(0,h.iH)("DashBoard")}}};var Ve=a(69885),Se=a(47817),Ee=a(70900),xe=a(89800),Ue=a(84106);const Qe=(0,T.Z)(Pe,[["render",p]]),Re=Qe;M()(Pe,"components",{QPage:Ve.Z,QTabs:Se.Z,QTab:Ee.Z,QTabPanels:xe.Z,QTabPanel:Ue.Z})}}]);