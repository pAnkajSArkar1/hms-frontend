"use strict";(globalThis["webpackChunkdoctolib"]=globalThis["webpackChunkdoctolib"]||[]).push([[7057],{37057:(e,t,a)=>{a.r(t),a.d(t,{default:()=>U});var l={};a.r(l),a.d(l,{showCreateTemplate:()=>p,showEditTemplate:()=>h});var n={};a.r(n),a.d(n,{createItem:()=>b,deleteItem:()=>T,editItem:()=>q,getItems:()=>w});var s=a(59835),r=a(86970);const o={class:"q-pa-md"};function i(e,t,a,l,n,i){const m=(0,s.up)("PpeMenu"),d=(0,s.up)("QDataTable"),u=(0,s.up)("create-template"),c=(0,s.up)("q-card"),p=(0,s.up)("q-dialog"),h=(0,s.up)("edit-template"),f=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(f,null,{default:(0,s.w5)((()=>[(0,s.Wm)(m),(0,s._)("div",o,[(0,s.Wm)(d,{useStore:l.useStore,title:"All PPE Templates"},null,8,["useStore"]),(0,s.Wm)(p,{modelValue:l.showCreateTemplate,"onUpdate:modelValue":t[0]||(t[0]=e=>l.showCreateTemplate=e)},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{class:"card-width"},{default:(0,s.w5)((()=>[(0,s._)("div",{class:(0,r.C_)((e.$q.platform.is.desktop,""))},[(0,s.Wm)(u,{useStore:l.useStore,modal:!0},null,8,["useStore"])],2)])),_:1})])),_:1},8,["modelValue"]),(0,s.Wm)(p,{modelValue:l.showEditTemplate,"onUpdate:modelValue":t[1]||(t[1]=e=>l.showEditTemplate=e)},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{class:"card-width"},{default:(0,s.w5)((()=>[(0,s._)("div",{class:(0,r.C_)((e.$q.platform.is.desktop,""))},[(0,s.Wm)(h,{useStore:l.useStore,modal:!0},null,8,["useStore"])],2)])),_:1})])),_:1},8,["modelValue"])])])),_:1})}var m=a(3746),d=a(60499),u=a(4026);function c(){return{columns:[{name:"created at",align:"left",label:"Date",field:e=>u.dateConvert.format(e.created_at),sortable:!0},{name:"templates",align:"left",label:"Templates",field:"name",sortable:!0},{name:"frequency",align:"left",label:"Frequency",field:"frequency",sortable:!0},{name:"department",align:"left",label:"Department",field:e=>e?.branch?.name,sortable:!0},{name:"actions",align:"right",label:"Actions"}],filter:{search:""},items:(0,d.qj)([]),item:(0,d.qj)({}),newData:(0,d.qj)({name:"",frequency:"",branch:{name:""},branch_id:null,equipments:[{equipment_id:null}]}),created_by:"",formData:(0,d.qj)({name:"",frequency:"",branch_id:null,equipments:[{equipment_id:null}]}),dialogs:(0,d.qj)({createItem:!1,editItem:!1}),lastUpdated:""}}function p(e){return e.dialogs.createItem}function h(e){return e.dialogs.editItem}var f=a(91569);const g="ppe-template";function w(e){if(console.log("getItems",!0),1==e.pagination.descending)var t="DESC";else t="ASC";var a={sort:e.pagination.sortBy,direction:t,page:e.pagination.page,rowsPerPage:e.pagination.rowsPerPage,search:e.search?e.search:this.filter.search};return new Promise(((e,t)=>{f.axios.get(g,{params:a}).then((t=>{e(t)})).catch((e=>{t(e)}))}))}function b(){return new Promise(((e,t)=>{f.axios.post(g,this.newData).then((t=>{this.lastUpdated=new Date,this.dialogs.createItem=!1,e(t)})).catch((e=>{t(e)}))}))}function q(){return new Promise(((e,t)=>{f.axios.put(g+"/"+this.formData.id,this.formData).then((t=>{this.lastUpdated=new Date,this.dialogs.editItem=!1,e(t)})).catch((e=>{t(e)}))}))}function T(e){return new Promise(((t,a)=>{f.axios["delete"](g+"/"+e.id).then((e=>{this.lastUpdated=new Date,t(e)})).catch((e=>{a(e)}))}))}const _=(0,m.Q_)("template",{state:c,getters:{...l},actions:{...n}}),C=(0,s.RC)((()=>a.e(3064).then(a.bind(a,78894)))),P=(0,s.RC)((()=>Promise.all([a.e(3064),a.e(6599)]).then(a.bind(a,36599)))),D=(0,s.RC)((()=>Promise.all([a.e(3064),a.e(9020)]).then(a.bind(a,19020)))),v={name:"PpeTemplate",components:{PpeMenu:C,createTemplate:P,editTemplate:D},setup(){const e=_(),t=(0,s.Fl)((()=>e.showCreateTemplate)),a=(0,s.Fl)((()=>e.showEditTemplate));return{useStore:e,showCreateTemplate:t,showEditTemplate:a}}};var S=a(11639),I=a(69885),W=a(32074),y=a(44458),E=a(69984),j=a.n(E);const k=(0,S.Z)(v,[["render",i]]),U=k;j()(v,"components",{QPage:I.Z,QDialog:W.Z,QCard:y.Z})}}]);