"use strict";(globalThis["webpackChunkdoctolib"]=globalThis["webpackChunkdoctolib"]||[]).push([[9325],{9325:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ie});var l={};a.r(l),a.d(l,{showCreatetaskManage:()=>S,showEdittaskManage:()=>E});var s={};a.r(s),a.d(s,{createItem:()=>Q,deleteItem:()=>A,editItem:()=>Z,getItems:()=>P});var o=a(59835);const n={class:"q-pa-md"};function i(e,t,a,l,s,i){const r=(0,o.up)("SubMenu"),d=(0,o.up)("risk-manage"),u=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r),(0,o._)("div",n,[(0,o.Wm)(d)])])),_:1})}var r=a(86970);const d={class:"row q-col-gutter-md"},u={class:"col-12 col-md-4 col-lg-4 q-gutter-md"},c=(0,o.Uk)(" Completed Tasks "),m=(0,o.Uk)(" Incompleted Tasks "),w=(0,o.Uk)(" Overdue Tasks "),p={class:"col-12 col-md-8 col-lg-8"},g={class:"col-12 col-md-4 col-lg-4"},k={class:"col-12 col-sm-8 col-md-8"},h={key:0},f={key:1},_={key:2},v={key:3},b={key:4},y={key:0},D={key:1},C={key:2},W=(0,o.Uk)(" Edit "),q=(0,o.Uk)(" Delete ");function U(e,t,a,l,s,n){const i=(0,o.up)("q-card-section"),U=(0,o.up)("q-card"),x=(0,o.up)("BarChart"),I=(0,o.up)("DoughnutChart"),M=(0,o.up)("q-td"),S=(0,o.up)("q-chip"),E=(0,o.up)("q-tooltip"),z=(0,o.up)("q-btn"),T=(0,o.up)("q-tr"),P=(0,o.up)("QDataTable"),Q=(0,o.up)("create-task-manage"),Z=(0,o.up)("q-dialog"),A=(0,o.up)("edit-task-manage");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",d,[(0,o._)("div",u,[(0,o.Wm)(U,null,{default:(0,o.w5)((()=>[(0,o.Wm)(i,{class:"text-weight-bold q-pb-none"},{default:(0,o.w5)((()=>[c])),_:1}),(0,o.Wm)(i,{class:"text-weight-bold"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(l.complete_tasks),1)])),_:1})])),_:1}),(0,o.Wm)(U,null,{default:(0,o.w5)((()=>[(0,o.Wm)(i,{class:"text-weight-bold q-pb-none"},{default:(0,o.w5)((()=>[m])),_:1}),(0,o.Wm)(i,{class:"text-weight-bold"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(l.incomplete_tasks),1)])),_:1})])),_:1}),(0,o.Wm)(U,null,{default:(0,o.w5)((()=>[(0,o.Wm)(i,{class:"text-weight-bold q-pb-none"},{default:(0,o.w5)((()=>[w])),_:1}),(0,o.Wm)(i,{class:"text-weight-bold"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(l.overdue),1)])),_:1})])),_:1})]),(0,o._)("div",p,[(0,o.Wm)(U,null,{default:(0,o.w5)((()=>[(0,o.Wm)(i,null,{default:(0,o.w5)((()=>[(0,o.Wm)(x,{class:"task-management-barchart",chartData:l.barChartData,chatTitle:"Total task count"},null,8,["chartData"])])),_:1})])),_:1})]),(0,o._)("div",g,[(0,o.Wm)(U,null,{default:(0,o.w5)((()=>[(0,o.Wm)(i,null,{default:(0,o.w5)((()=>[(0,o.Wm)(I,{chartData:l.doughnutChartData,chartLabel:"All task by completion status"},null,8,["chartData"])])),_:1})])),_:1})]),(0,o._)("div",k,[(0,o.Wm)(P,{customBodySlot:!0,useStore:l.useStore,title:"Task Management"},{customBodySlot:(0,o.w5)((t=>[(0,o.Wm)(T,null,{default:(0,o.w5)((()=>[(0,o.Wm)(M,{key:"name"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(t.row.name),1)])),_:2},1024),(0,o.Wm)(M,{key:"priority"},{default:(0,o.w5)((()=>["Very High"===t.row.priority?((0,o.wg)(),(0,o.iD)("span",h,[(0,o.Wm)(S,{color:"negative",class:"text-white"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(t.row.priority),1)])),_:2},1024)])):(0,o.kq)("",!0),"High"===t.row.priority?((0,o.wg)(),(0,o.iD)("span",f,[(0,o.Wm)(S,{color:"red-5",class:"text-white"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(t.row.priority),1)])),_:2},1024)])):(0,o.kq)("",!0),"Medium"===t.row.priority?((0,o.wg)(),(0,o.iD)("span",_,[(0,o.Wm)(S,{color:"grey",class:"text-white"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(t.row.priority),1)])),_:2},1024)])):(0,o.kq)("",!0),"Low"===t.row.priority?((0,o.wg)(),(0,o.iD)("span",v,[(0,o.Wm)(S,{color:"positive",class:"text-white"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(t.row.priority),1)])),_:2},1024)])):(0,o.kq)("",!0),"Very Low"===t.row.priority?((0,o.wg)(),(0,o.iD)("span",b,[(0,o.Wm)(S,{color:"green-10",class:"text-white"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(t.row.priority),1)])),_:2},1024)])):(0,o.kq)("",!0)])),_:2},1024),(0,o.Wm)(M,{key:"name"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(t.row?.createdby?.name),1)])),_:2},1024),(0,o.Wm)(M,{key:"name"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(t.row?.assigned_to_user?.name),1)])),_:2},1024),(0,o.Wm)(M,{key:"deadline"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(e.$dateConvert.format(t.row.deadline)),1)])),_:2},1024),(0,o.Wm)(M,{key:"status"},{default:(0,o.w5)((()=>["Incomplete"===t.row.status?((0,o.wg)(),(0,o.iD)("span",y,[(0,o.Wm)(S,{color:"yellow-7",class:"text-white"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(t.row.status),1)])),_:2},1024)])):(0,o.kq)("",!0),"Complete"===t.row.status?((0,o.wg)(),(0,o.iD)("span",D,[(0,o.Wm)(S,{color:"green",class:"text-white"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(t.row.status),1)])),_:2},1024)])):(0,o.kq)("",!0),"Overdue"===t.row.status?((0,o.wg)(),(0,o.iD)("span",C,[(0,o.Wm)(S,{color:"red",class:"text-white"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(t.row.status),1)])),_:2},1024)])):(0,o.kq)("",!0)])),_:2},1024),(0,o.Wm)(M,{key:"actions",align:"right"},{default:(0,o.w5)((()=>[(0,o.Wm)(z,{flat:"",round:"",dense:"",color:"accent",icon:"edit",class:"q-ml-sm",onClick:e=>l.onClickEdit(t.row)},{default:(0,o.w5)((()=>[(0,o.Wm)(E,null,{default:(0,o.w5)((()=>[W])),_:1})])),_:2},1032,["onClick"]),(0,o.Wm)(z,{flat:"",round:"",dense:"",color:"negative",icon:"clear",onClick:e=>l.onClickDelete(t.row)},{default:(0,o.w5)((()=>[(0,o.Wm)(E,null,{default:(0,o.w5)((()=>[q])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:1},8,["useStore"])])]),(0,o.Wm)(Z,{modelValue:l.showCreatetaskManage,"onUpdate:modelValue":t[0]||(t[0]=e=>l.showCreatetaskManage=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(U,{class:"full-width"},{default:(0,o.w5)((()=>[(0,o._)("div",{class:(0,r.C_)((e.$q.platform.is.desktop,""))},[(0,o.Wm)(Q,{useStore:l.useStore,modal:!0},null,8,["useStore"])],2)])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(Z,{modelValue:l.showEdittaskManage,"onUpdate:modelValue":t[1]||(t[1]=e=>l.showEdittaskManage=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(U,{class:"card-width"},{default:(0,o.w5)((()=>[(0,o._)("div",{class:(0,r.C_)((e.$q.platform.is.desktop,""))},[(0,o.Wm)(A,{useStore:l.useStore,modal:!0},null,8,["useStore"])],2)])),_:1})])),_:1},8,["modelValue"])],64)}a(69665);var x=a(60499),I=a(3746);a(4026);function M(){return{columns:[{name:"name",align:"left",label:"Name",field:"name",sortable:!0},{name:"priority",align:"left",label:"Priority",field:"priority",sortable:!0},{name:"createdby",align:"left",label:"Assigned By",field:e=>e?.createdby?.name,sortable:!0},{name:"assigned_to_user",align:"left",label:"Assigned To",field:e=>e?.assigned_to_user?.name,sortable:!0},{name:"deadline",align:"left",label:"Deadline",field:"deadline",sortable:!0},{name:"status",align:"left",label:"Status",field:"status",sortable:!0},{name:"actions",align:"right",label:"Actions"}],filter:{search:""},items:(0,x.qj)([]),item:(0,x.qj)({}),newData:(0,x.qj)({name:"",assigned_to:null,priority:"",status:"",deadline:null,description:""}),formData:(0,x.qj)({name:"",assigned_to:null,priority:"",status:"",deadline:null,description:""}),dialogs:(0,x.qj)({createItem:!1,editItem:!1}),lastUpdated:""}}function S(e){return e.dialogs.createItem}function E(e){return e.dialogs.editItem}var z=a(91569);const T="event";function P(e){if(console.log("getItems",!0),e.all)var t={all:e.all};else{if(1==e.pagination.descending)var a="DESC";else a="ASC";t={sort:e.pagination.sortBy,direction:a,page:e.pagination.page,rowsPerPage:e.pagination.rowsPerPage,search:e.search?e.search:this.filter.search}}return new Promise(((e,a)=>{z.axios.get(T,{params:t}).then((t=>{e(t)})).catch((e=>{a(e)}))}))}function Q(){return new Promise(((e,t)=>{z.axios.post(T,this.newData).then((t=>{this.lastUpdated=new Date,this.dialogs.createItem=!1,e(t)})).catch((e=>{t(e)}))}))}function Z(){return new Promise(((e,t)=>{z.axios.put(T+"/"+this.formData.id,this.formData).then((t=>{this.lastUpdated=new Date,this.dialogs.editItem=!1,e(t)})).catch((e=>{t(e)}))}))}function A(e){return new Promise(((t,a)=>{z.axios["delete"](T+"/"+e.id).then((e=>{this.lastUpdated=new Date,t(e)})).catch((e=>{a(e)}))}))}const V=(0,I.Q_)("manageEvent",{state:M,getters:{...l},actions:{...s}});var j=a(19302);const F=(0,o.RC)((()=>Promise.all([a.e(4736),a.e(3064),a.e(9584)]).then(a.bind(a,89584)))),H=(0,o.RC)((()=>Promise.all([a.e(4736),a.e(3064),a.e(3235)]).then(a.bind(a,73235)))),O={name:"ManageEvents",components:{CreateTaskManage:F,EditTaskManage:H},setup(e){const t=V(),a=(0,j.Z)(),{deleteItem:l}=t,{formData:s,dialogs:n}=(0,I.Jk)(t),i=(0,o.Fl)((()=>t.showCreatetaskManage)),r=(0,o.Fl)((()=>t.showEdittaskManage)),d=(0,o.FN)(),u=d.appContext.config.globalProperties.$Qnotify,c=(0,x.iH)([]),m=(0,x.iH)(""),w=(0,x.iH)(0),p=(0,x.iH)(0),g=(0,x.iH)(0),k=t=>{router.push({name:e.viewRoute,params:{id:t.id}})},h=e=>{s.value=e,n.value.editItem=!0},f=e=>{a.dialog({title:"Delete Confirmation",message:"Are you sure you want to Delete",ok:{label:"Delete",unelevated:!0,color:"red-5"},cancel:{unelevated:!0,color:"",textColor:"black"},persistent:!0}).onOk((()=>{c.value=!0,l(e).then((e=>{u({message:e.data.message,type:"positive"})})).catch((e=>{u({message:e.message,type:"negative"})})).finally((()=>{c.value=!1}))}))},_=(0,x.qj)({labels:["Complete","Incomplete","Overdue"],datasets:[{data:[0,0,0],backgroundColor:["#38E54D","#FFDE00","#D2001A"],hoverOffset:4}]}),v=(0,x.qj)({labels:["Complete","Incomplete","Overdue"],datasets:[{data:[0,0,0],backgroundColor:["#38E54D","#FFDE00","#D2001A"],hoverOffset:4}]});(0,o.wF)((()=>{b()}));const b=()=>{t.getItems({all:!0}).then((e=>{w.value=0,p.value=0,g.value=0,e.data.map((e=>{"Incomplete"===e.status&&w.value++,"Complete"===e.status&&p.value++,"Overdue"===e.status&&g.value++})),_.datasets[0].data=[],_.datasets[0].data.push(p.value),_.datasets[0].data.push(w.value),_.datasets[0].data.push(g.value),v.datasets[0].data=[],v.datasets[0].data.push(p.value),v.datasets[0].data.push(w.value),v.datasets[0].data.push(g.value)}))};return{useStore:t,showCreatetaskManage:i,showEdittaskManage:r,onClickEdit:h,formData:s,onClickDelete:f,loading:c,taskDetails:m,onClickView:k,barChartData:_,doughnutChartData:v,fetchAllData:b,incomplete_tasks:w,complete_tasks:p,overdue:g}}};var B=a(11639),R=a(44458),$=a(63190),L=a(31233),N=a(67220),J=a(57691),Y=a(68879),G=a(46858),K=a(32074),X=a(69984),ee=a.n(X);const te=(0,B.Z)(O,[["render",U]]),ae=te;ee()(O,"components",{QCard:R.Z,QCardSection:$.Z,QTr:L.Z,QTd:N.Z,QChip:J.Z,QBtn:Y.Z,QTooltip:G.Z,QDialog:K.Z});const le=(0,o.RC)((()=>a.e(6802).then(a.bind(a,16802)))),se={components:{riskManage:ae,SubMenu:le},setup(){return{}}};var oe=a(69885);const ne=(0,B.Z)(se,[["render",i]]),ie=ne;ee()(se,"components",{QPage:oe.Z})}}]);